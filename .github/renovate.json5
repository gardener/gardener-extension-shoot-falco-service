{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "dependencyDashboard": true,
  "dependencyDashboardTitle": "Renovate Dependency Dashboard",
  "labels": ["kind/enhancement", "reviewed/ok-to-test"],
  "postUpdateOptions": ["gomodTidy"],
  "kubernetes": {
    "fileMatch": ["\\.yaml$", "\\.yml$"]
  },
  "regexManagers": [
    {
      "fileMatch": ["^charts/.*\\.yaml$"],
      "matchStrings": [
        "pluginRef:\\s+\"(?<depName>[^:]+):(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "docker"
    }
  ],
  "packageRules": [
    {
      "description": "Group all Falco plugin updates together",
      "matchDatasources": ["docker"],
      "matchPackagePatterns": ["^ghcr\\.io/falcosecurity/plugins"],
      "groupName": "falco-plugins"
    },
    {
      "description": "Group all non-Gardener Go dependencies together",
      "matchManagers": ["gomod"],
      "matchUpdateTypes": ["minor", "patch"],
      "excludePackagePatterns": ["^github\\.com/gardener"],
      "groupName": "non-gardener-go-dependencies"
    },
    {
      "description": "Separate PRs for Gardener components",
      "matchManagers": ["gomod"],
      "matchPackagePatterns": ["^github\\.com/gardener"],
      "groupName": null
    }
  ]
}

